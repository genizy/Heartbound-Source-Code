<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_combat_controls_leftmouse</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-6005</depth>
  <persistent>0</persistent>
  <parentName>obj_game_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>attack_completed = 0;
attack_defeated = 0;
attack_number = 6 + obj_combat_parent.selected_diff + global.storyline_array[107];
attack_number = clamp(attack_number, 6, 12);
attack_array = 0;

for (xx = 0; xx &lt; attack_number; xx++)
    attack_array[xx] = 0;

var last_value = 0;

for (xx = 0; xx &lt; attack_number; xx++)
{
    select_value = irandom_range(1, 4);
    
    while (select_value == last_value)
        select_value = irandom_range(1, 4);
    
    attack_array[xx] = select_value;
    last_value = select_value;
}

image_speed = 0.1;

with (obj_barghest_combat_parent)
    color_target = 0;

if (global.gamepad_connected == 0)
{
    global.cursor_active = 1;
    
    if (global.storyline_array[23] == 1)
        global.cursor_model = 1154;
    else
        global.cursor_model = 1153;
}
else
{
    sprite_index = spr_combat_controls_gamepad_buttons;
}

time_modifier = (obj_combat_parent.selected_diff * 0.1) + (global.storyline_array[107] * 0.1);
time_modifier = clamp(time_modifier, 0, 0.9);
attack_reset_delay = room_speed * (0.5 * (1 - time_modifier));
attack_reset_delay = clamp(attack_reset_delay, room_speed * 0.3, room_speed * 0.5);
attack_start_delay = room_speed * 0.5;

if (global.gamepad_connected == 1)
{
    time_modifier = (obj_combat_parent.selected_diff * 0.1) + (global.storyline_array[107] * 0.1);
    time_modifier = clamp(time_modifier, 0, 0.9);
    attack_reset_delay = room_speed * time_modifier;
    attack_reset_delay = clamp(attack_reset_delay, room_speed * 0.5, room_speed);
}

if (obj_combat_parent.selected_diff &gt; 1)
{
    display_text = 0;
    alarm[1] = attack_start_delay;
}
else
{
    display_text = 1;
    alarm[0] = room_speed / (obj_combat_parent.selected_diff + 1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with (obj_barghest_combat_parent)
    color_target = 16777215;

if (instance_exists(obj_barghest_pods_pod))
{
    scr_sound_play(168, 0.3, random_range(0.95, 1), 0);
    
    with (obj_barghest_pods_pod)
    {
        var death_object = instance_create(x, y, obj_barghest_pods_pod_explosion);
        death_object.image_angle = image_angle;
        instance_destroy();
    }
}

global.cursor_active = 0;
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_combat_parent.activate_game = 1;

with (obj_barghest_combat_parent)
    color_target = 16777215;

global.cursor_active = 0;
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (attack_completed &lt; attack_number)
{
    if (global.gamepad_connected == 0)
        pod_link = instance_create(irandom_range(x - 80, x + 80), obj_view.y - 220, obj_barghest_pods_pod);
    else
        pod_link = instance_create(irandom_range(x - 80, x + 80), obj_view.y - 200, obj_barghest_pods_pod);
    
    pod_link.pod_number = attack_completed;
    
    switch (attack_array[attack_completed])
    {
        case 1:
            pod_link.pod_control = 1143;
            break;
        
        case 2:
            pod_link.pod_control = 1144;
            break;
        
        case 3:
            pod_link.pod_control = 1145;
            break;
        
        case 4:
            pod_link.pod_control = 1146;
            break;
    }
    
    attack_completed += 1;
    alarm[1] = attack_reset_delay;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.gamepad_connected == 1)
{
    if (instance_exists(obj_barghest_pods_pod))
    {
        if (attack_defeated &lt; attack_number)
        {
            correct_press = -1;
            
            switch (attack_array[attack_defeated])
            {
                case 1:
                    if (global.a_key)
                        correct_press = 1;
                    else if (global.b_key)
                        correct_press = 0;
                    else if (global.x_key)
                        correct_press = 0;
                    else if (global.y_key)
                        correct_press = 0;
                    
                    break;
                
                case 2:
                    if (global.b_key)
                        correct_press = 1;
                    else if (global.a_key)
                        correct_press = 0;
                    else if (global.x_key)
                        correct_press = 0;
                    else if (global.y_key)
                        correct_press = 0;
                    
                    break;
                
                case 3:
                    if (global.x_key)
                        correct_press = 1;
                    else if (global.a_key)
                        correct_press = 0;
                    else if (global.b_key)
                        correct_press = 0;
                    else if (global.y_key)
                        correct_press = 0;
                    
                    break;
                
                case 4:
                    if (global.y_key)
                        correct_press = 1;
                    else if (global.a_key)
                        correct_press = 0;
                    else if (global.b_key)
                        correct_press = 0;
                    else if (global.x_key)
                        correct_press = 0;
                    
                    break;
            }
            
            if (correct_press != -1)
            {
                xx = 0;
                total_pods = instance_number(obj_barghest_pods_pod);
                
                for (xx = 0; xx &lt; total_pods; xx++)
                {
                    pod_target = instance_find(obj_barghest_pods_pod, xx);
                    
                    if (pod_target.pod_number == attack_defeated)
                    {
                        with (pod_target)
                        {
                            if (other.correct_press == 1)
                            {
                                if (global.storyline_array[23] == 1)
                                {
                                    global.enemy_hp_check -= 2;
                                    scr_damage_target(2, 23, x, y);
                                }
                                else
                                {
                                    global.enemy_hp_check -= 1;
                                    scr_damage_target(1, 23, x, y);
                                }
                                
                                other.attack_defeated += 1;
                                
                                if (other.attack_defeated == other.attack_number)
                                    other.alarm[2] = room_speed * 0.5;
                                
                                scr_sound_play(168, 0.3, random_range(0.95, 1), 0);
                                var death_object = instance_create(x, y, obj_barghest_pods_pod_explosion);
                                death_object.image_angle = image_angle;
                                instance_destroy();
                            }
                            else if (other.correct_press == 0)
                            {
                                speed = 10;
                                pod_state = 1;
                                other.attack_defeated += 1;
                                
                                if (other.attack_defeated == other.attack_number)
                                    other.alarm[2] = room_speed * 0.5;
                            }
                        }
                        
                        break;
                    }
                }
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (display_text == 1)
{
    draw_sprite_ext(sprite_index, image_index, 320, obj_view.y + 40, image_xscale, image_yscale, image_angle, image_blend, image_alpha);
    
    if (alarm[0] &lt; 1)
    {
        image_alpha -= ((0.04 * obj_combat_parent.selected_diff) + 0.04);
        
        if (image_alpha &lt;= 0)
        {
            display_text = 0;
            alarm[1] = attack_start_delay;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.1</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.1</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.1</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.2</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints />
</object>
